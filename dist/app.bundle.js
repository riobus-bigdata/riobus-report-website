webpackJsonp([0],{0:function(n,exports,e){e(1),n.exports=e(299)},299:function(n,exports,e){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}e(300);var i=e(304),s=t(i),a=e(306),d=t(a),l=e(312),o=t(l),r=e(314),c=(t(r),e(418)),u=t(c),m=e(419),p=t(m),f=e(420),g=t(f),h=e(422),j=t(h);s["default"].module("app",[d["default"],o["default"],p["default"],u["default"].name]).component("app",g["default"]).service("data",j["default"])},316:function(n,exports,e){function t(n){return e(i(n))}function i(n){return s[n]||function(){throw new Error("Cannot find module '"+n+"'.")}()}var s={"./af":317,"./af.js":317,"./ar":318,"./ar-ma":319,"./ar-ma.js":319,"./ar-sa":320,"./ar-sa.js":320,"./ar-tn":321,"./ar-tn.js":321,"./ar.js":318,"./az":322,"./az.js":322,"./be":323,"./be.js":323,"./bg":324,"./bg.js":324,"./bn":325,"./bn.js":325,"./bo":326,"./bo.js":326,"./br":327,"./br.js":327,"./bs":328,"./bs.js":328,"./ca":329,"./ca.js":329,"./cs":330,"./cs.js":330,"./cv":331,"./cv.js":331,"./cy":332,"./cy.js":332,"./da":333,"./da.js":333,"./de":334,"./de-at":335,"./de-at.js":335,"./de.js":334,"./dv":336,"./dv.js":336,"./el":337,"./el.js":337,"./en-au":338,"./en-au.js":338,"./en-ca":339,"./en-ca.js":339,"./en-gb":340,"./en-gb.js":340,"./en-ie":341,"./en-ie.js":341,"./en-nz":342,"./en-nz.js":342,"./eo":343,"./eo.js":343,"./es":344,"./es-do":345,"./es-do.js":345,"./es.js":344,"./et":346,"./et.js":346,"./eu":347,"./eu.js":347,"./fa":348,"./fa.js":348,"./fi":349,"./fi.js":349,"./fo":350,"./fo.js":350,"./fr":351,"./fr-ca":352,"./fr-ca.js":352,"./fr-ch":353,"./fr-ch.js":353,"./fr.js":351,"./fy":354,"./fy.js":354,"./gd":355,"./gd.js":355,"./gl":356,"./gl.js":356,"./he":357,"./he.js":357,"./hi":358,"./hi.js":358,"./hr":359,"./hr.js":359,"./hu":360,"./hu.js":360,"./hy-am":361,"./hy-am.js":361,"./id":362,"./id.js":362,"./is":363,"./is.js":363,"./it":364,"./it.js":364,"./ja":365,"./ja.js":365,"./jv":366,"./jv.js":366,"./ka":367,"./ka.js":367,"./kk":368,"./kk.js":368,"./km":369,"./km.js":369,"./ko":370,"./ko.js":370,"./ky":371,"./ky.js":371,"./lb":372,"./lb.js":372,"./lo":373,"./lo.js":373,"./lt":374,"./lt.js":374,"./lv":375,"./lv.js":375,"./me":376,"./me.js":376,"./mk":377,"./mk.js":377,"./ml":378,"./ml.js":378,"./mr":379,"./mr.js":379,"./ms":380,"./ms-my":381,"./ms-my.js":381,"./ms.js":380,"./my":382,"./my.js":382,"./nb":383,"./nb.js":383,"./ne":384,"./ne.js":384,"./nl":385,"./nl.js":385,"./nn":386,"./nn.js":386,"./pa-in":387,"./pa-in.js":387,"./pl":388,"./pl.js":388,"./pt":389,"./pt-br":390,"./pt-br.js":390,"./pt.js":389,"./ro":391,"./ro.js":391,"./ru":392,"./ru.js":392,"./se":393,"./se.js":393,"./si":394,"./si.js":394,"./sk":395,"./sk.js":395,"./sl":396,"./sl.js":396,"./sq":397,"./sq.js":397,"./sr":398,"./sr-cyrl":399,"./sr-cyrl.js":399,"./sr.js":398,"./ss":400,"./ss.js":400,"./sv":401,"./sv.js":401,"./sw":402,"./sw.js":402,"./ta":403,"./ta.js":403,"./te":404,"./te.js":404,"./th":405,"./th.js":405,"./tl-ph":406,"./tl-ph.js":406,"./tlh":407,"./tlh.js":407,"./tr":408,"./tr.js":408,"./tzl":409,"./tzl.js":409,"./tzm":410,"./tzm-latn":411,"./tzm-latn.js":411,"./tzm.js":410,"./uk":412,"./uk.js":412,"./uz":413,"./uz.js":413,"./vi":414,"./vi.js":414,"./x-pseudo":415,"./x-pseudo.js":415,"./zh-cn":416,"./zh-cn.js":416,"./zh-tw":417,"./zh-tw.js":417};t.keys=function(){return Object.keys(s)},t.resolve=i,n.exports=t,t.id=316},420:function(n,exports,e){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}function i(n,e,t){function i(){s.average=void 0,s.linesCount=void 0,s.lines=void 0,s.line=void 0,s.notFound=!1,s.loading=!0,s.filter.dateBegin=(0,l["default"])(s.filter.$dateBegin,"L",!0).format("YYYY-MM-DDTHH:mm:ss"),s.filter.dateEnd=(0,l["default"])(s.filter.$dateEnd,"L",!0).format("YYYY-MM-DDTHH:mm:ss");var n;switch(s.filter.type){case"Limit":if(!s.filter.speed)return;n=e.getSpeedLimit(s.filter);break;case"Lines":n=e.getBusCount(s.filter);break;case"Average":n=e.getAverageSpeed(s.filter);break;default:return}n.then(function(n){"Limit"===s.filter.type&&(s.lines=n.sample.map(function(n,e){return{id:e+1,number:n[2],speed:n[5],date:n[0],position:[n[3],n[4]]}})),"Lines"===s.filter.type&&(s.linesCount=n.lines.map(function(n){return{number:n[0],count:n[1]}})),"Average"===s.filter.type&&(s.average=n.result,s.average||(s.notFound=!0)),s.loading=!1},function(n){t.showSimple("Error!"),s.loading=!1})}var s=this;s.filter={speed:60,type:"Limit",lat1:"-22.92",lng1:"-43.18",lat2:"-22.93",lng2:"-43.17",$dateBegin:(0,l["default"])("15-04-2015 00:00","DD-MM-YYYY HH:mm:ss").toDate(),$dateEnd:(0,l["default"])("15-04-2015 23:59","DD-MM-YYYY HH:mm:ss").toDate()},s.average=void 0,s.linesCount=void 0,s.lines=void 0,s.line=void 0,s.notFound=!1,s.loading=!1,s.search=i,s.showLine=function(n,e){s.line=s.lines[e-1],s.map.showInfoWindow("foo",this)},n.getMap("map").then(function(n){console.log("map",n),s.map=n}),s.boundsChanged=function(){s.filter.lat1=this.getBounds().getSouthWest().lat(),s.filter.lng1=this.getBounds().getSouthWest().lng(),s.filter.lat2=this.getBounds().getNorthEast().lat(),s.filter.lng2=this.getBounds().getNorthEast().lng()}}Object.defineProperty(exports,"__esModule",{value:!0});var s=e(421),a=t(s),d=e(314),l=t(d),o={template:a["default"],controller:i};i.$inject=["NgMap","data","$mdToast"],exports["default"]=o},421:function(n,exports){n.exports='<div layout="column" flex>\n  <md-toolbar md-whiteframe="2">\n    <div class="md-toolbar-tools">\n      <h2>Rio Bus</h2>\n    </div>\n  </md-toolbar>\n\n  <div flex layout="row">\n    <div flex layout="column">\n      <div flex layout="row">\n        <div flex layout="column" layout-padding>\n          <ng-map center="-22.912534, -43.192880" zoom="13" id="map" map-type-control="false" flex>\n            <shape name="rectangle" editable="true" draggable="true" bounds="[[-22.92, -43.18],[-22.93, -43.17]]" on-bounds_changed="$ctrl.boundsChanged()">\n            </shape>\n            <marker ng-if="$ctrl.lines"\n                    ng-repeat="line in $ctrl.lines" \n                    position="{{line.position}}" \n                    on-click="$ctrl.showLine(event, line.id)">\n            </marker>\n            <info-window id="foo" ng-if="$ctrl.lines">\n              <div ng-non-bindable="">\n                <p>Linha: {{$ctrl.line.number}}</p>\n                <p>Velocidade: {{$ctrl.line.speed}}km/h</p>\n                <p>Data: {{$ctrl.line.date}}</p>\n              </div>\n            </info-window>\n          </ng-map>\n        </div>\n      </div>\n      <md-card>\n        <md-card-title>\n          <md-card-title-text>\n            <span class="md-headline">Filter</span>\n          </md-card-title-text>\n        </md-card-title>\n        <div flex layout="column" layout-margin>\n          <md-radio-group ng-model="$ctrl.filter.type" flex layout="row" ng-disabled="$ctrl.loading">\n            <md-radio-button value="Limit">Speed Limit</md-radio-button>\n            <md-radio-button value="Lines">Bus Lines</md-radio-button>\n            <md-radio-button value="Average">Average Speed</md-radio-button>\n          </md-radio-group>\n          <div flex layout="row">\n            <md-input-container ng-show="$ctrl.filter.type === \'Limit\'" class="md-block">\n              <input ng-model="$ctrl.filter.speed" type="number" placeholder="Speed" ng-required="$ctrl.filter.type === \'Limit\'" ng-disabled="$ctrl.loading">\n            </md-input-container>\n            <md-datepicker ng-model="$ctrl.filter.$dateBegin" md-placeholder="Start Date" ng-disabled="$ctrl.loading">\n            </md-datepicker>\n            <md-datepicker ng-model="$ctrl.filter.$dateEnd" md-placeholder="End Date" ng-disabled="$ctrl.loading">\n            </md-datepicker>\n          </div>\n          <md-button flex class="md-primary md-raised" ng-click="$ctrl.search()" ng-disabled="$ctrl.loading">\n            Search\n          </md-button>\n        </div>\n      </md-card>\n    </div>\n    <div flex layout="column">\n      <md-card flex>\n        <md-card-content flex layout="column">\n          <div layout="column">\n            <span class="md-headline">Resultados</span>\n            <span class="md-subhead">Utilize os filtros ao lado para fazer uma busca</span>\n          </div>\n          <div layout="row" layout-align="center center" flex ng-show="$ctrl.loading">\n            <md-progress-circular md-mode="indeterminate"></md-progress-circular>\n          </div>\n          <div layout="column" layout-align="center center" ng-hide="true">\n            <md-icon style="font-size: 60px;">search</md-icon>\n            <h4 class="md-headline">Select the filters and search</h4>\n          </div>\n          <div ng-show="$ctrl.average" flex layout-align="center center" layout="column">\n            <md-icon style="font-size:50px;margin:0px;height:50px;width:50px;">slow_motion_video</md-icon>\n            <h4 class="md-headline">Velocidade MÃ©dia: {{$ctrl.average}} km/h</h4>\n          </div>\n          <md-content ng-show="$ctrl.linesCount" style="margin-top:70px; background-color:white;">\n            <md-list>\n              <md-list-item class="md-2-line" ng-repeat="line in $ctrl.linesCount | orderBy: \'-count\'">\n                <md-icon class="md-avatar-icon">directions_bus</md-icon>\n                <div class="md-list-item-text">\n                  <h3> Linha: {{ line.number }} </h3>\n                  <p> Quantidade: {{ line.count }} </p>\n                </div>\n                <md-button class="md-secondary md-icon-button" ng-click="doSecondaryAction($event)" ng-if="phone.options.actionIcon" aria-label="call">\n                  <md-icon md-svg-icon="{{phone.options.actionIcon}}"></md-icon>\n                </md-button>\n              </md-list-item>\n            </md-list>\n          </md-content>\n          <md-content ng-show="$ctrl.lines" style="margin-top:70px; background-color:white;">\n            <md-list>\n              <md-list-item class="md-2-line" ng-repeat="line in $ctrl.lines | orderBy: \'-speed\'">\n                <md-icon class="md-avatar-icon">directions_bus</md-icon>\n                <div class="md-list-item-text">\n                  <h3> Linha: {{ line.number }} </h3>\n                  <p> Velocidade: {{ line.speed }}km/h </p>\n                </div>\n                <md-button class="md-secondary md-icon-button" ng-click="doSecondaryAction($event)" ng-if="phone.options.actionIcon" aria-label="call">\n                  <md-icon md-svg-icon="{{phone.options.actionIcon}}"></md-icon>\n                </md-button>\n              </md-list-item>\n            </md-list>\n          </md-content>\n          <div flex layout-align="center center" layout="column" ng-show="$ctrl.notFound">\n            <md-icon style="font-size:50px;margin:0px;height:50px;width:50px;">sentiment_dissatisfied</md-icon>\n            <span class="md-headline">Nenhum resultado encontrado</span>\n          </div>\n        </md-card-content>\n      </md-card>\n    </div>\n  </div>\n</div>'},422:function(n,exports,e){"use strict";function t(n){return n&&n.__esModule?n:{"default":n}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(423),s=t(i),a=e(424),d=t(a),l=function(){function n(e){(0,s["default"])(this,n),this.$resource=e}return(0,d["default"])(n,[{key:"getSpeedLimit",value:function(n){return n.returnLength=100,this.$resource("http://64.137.217.119:3000/speedLimit/:dateBegin/:dateEnd/:lat1/:lng1/:lat2/:lng2/:speed/:returnLength",n).get().$promise.then(function(n){return n})}},{key:"getBusCount",value:function(n){return this.$resource("http://64.137.217.119:3000/busLineCount/:dateBegin/:dateEnd",n).get().$promise.then(function(n){return n})}},{key:"getAverageSpeed",value:function(n){return this.$resource("http://64.137.217.119:3000/averagespeed/:dateBegin/:dateEnd/:lat1/:lng1/:lat2/:lng2",n).get().$promise.then(function(n){return n})}}]),n}();l.$inject=["$resource"],exports["default"]=l}});
//# sourceMappingURL=app.bundle.js.map